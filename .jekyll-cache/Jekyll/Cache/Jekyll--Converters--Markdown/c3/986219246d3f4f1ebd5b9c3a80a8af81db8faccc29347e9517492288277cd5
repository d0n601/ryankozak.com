I"D<p><strong>UPDATE 12/5/2016:</strong>
  If you’re going to attempt to integrate this into the WordPress platform, please consider using my <a href="https://wordpress.org/plugins/wp-drinking-age/" target="_blank">WP Drinking Age Plugin</a>.</p>

<h2 id="background">Background</h2>

<p>So outside the normal grind I’ve been working on a website for a tequila brand. After a meeting with marketing I’d gathered it was important to add a drinking age gateway to the site. You see some type of these gateways on just about every alcohol brand’s site. I asked if they’d prefer to simply ask “Are you of Legal Drinking Age?”, and then have  “Yes/No” buttons determine a user’s fate (<a href="http://cuervo.com/" target="_blank">1</a>)(<a href="http://www.1800tequila.com/product/silver/" target="_blank">2</a>), or if they’d rather have the user input their birthday (<a href="http://www.patrontequila.com/age-gate/age-gate.html?origin=%2F&amp;flc=homepage&amp;fln=Post_Homepage_Patron" target="_blank">3</a>). Apparently, and I’m not a business guy or a lawyer so don’t comment and argue this with me, the yes/no gateways hold slightly less legitimacy than the ones where a user inputs their birthday to enter the site .</p>

<p>These gateways are really just about putting responsibility into the hands of the user, within reason. Is it easier to  lie with a yes/no gateway?…sure. Is it impossible to lie about your birthday though?…definitely not. So a birthday input is reasonably easy to implement, but not impossible to crack. If a user is going to lie they’re going to lie, not turn off JavaScript to get around the gateway. This is why a client side gateway seemed like the most reasonable approach.</p>

<h2 id="solution">Solution</h2>

<p>A JavaScript gateway will allow easy indexing by search engines because they won’t run the JavaScript to restrict the content in the first place . If we were to have PHP check for the presence of an age verification cookie,  search engine crawlers will not have this cookie and will not see/index the content. We could work around that I’m sure, but there’s no need.</p>

<p>All countries don’t have the same drinking age. So solutions where the gateway is based on a static entry age aren’t viable. An age, and location must be gathered by the gateway to determine if a user is credible to enter the site. Tequila in Mexico is legal 3 years earlier than California. Sites that implemented this type of gateway (1) seemed to POST location values with country codes “US” “CA” ,ect. So they were authenticating server side with these codes…ugh</p>

<p>I’d Googled long enough to determine the few hours spent writing this script were likely more fun than just searching for an existing solution to work with, because it didn’t jump out at me.</p>

<p><a href="https://github.com/d0n601/drinkingAge" target="_blank">Github Code</a></p>

<h2 id="installation">Installation</h2>

<ol>
  <li>Download the dependencies of <a href="http://getbootstrap.com/getting-started/" target="_blank">Bootstrap</a> and <a href="https://jquery.com/download/" target="_blank">jQuery</a></li>
  <li>Get the Source <a href="https://github.com/d0n601/drinkingAge/archive/master.zip" target="_blank">drinkingAge</a></li>
  <li>Place <a href="https://raw.githubusercontent.com/d0n601/drinkingAge/master/bouncer.css" target="_blank">bouncer.css</a> in site’s head <code class="language-plaintext highlighter-rouge">&lt;link href="css/bouncer.css" rel="stylesheet"&gt;</code></li>
  <li>Place <a href="https://raw.githubusercontent.com/d0n601/drinkingAge/master/bouncer.js" target="_blank">bouncer.js</a> before the close of the body <code class="language-plaintext highlighter-rouge">&lt;script src="js/bouncer.js"&gt;&lt;/script&gt;</code></li>
  <li>Initialize the gateway and its settings</li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">//Settings for drinkingAge Plugin</span>
    <span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">image</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">http://placehold.it/350x150</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">message</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">As part of our commitment to responsible drinking, we just need to check that you're of legal drinking age.</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">redirect</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">http://responsibility.org</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">deny_message</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Sorry, but you are not of legal drinking age.&lt;br&gt;You'll be redirected soon...</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">deny_timeout</span><span class="dl">"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">link_terms</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">/terms</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">link_privacy</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">/privacy</span><span class="dl">'</span>
                <span class="p">};</span>
    <span class="c1">//Initiate bouncer.js (drinkingAge)</span>
    <span class="nx">drinkingAge</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Putting that all together in the most basic form you should have this.</p>

<p><a href="https://rawgit.com/d0n601/drinkingAge/master/example/index.html" target="_blank">Example Gateway</a></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">context=</span><span class="s">"text/html; charset=utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;title&gt;</span>Drinks N' Alcohol<span class="nt">&lt;/title&gt;</span>

        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"..//bouncer.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;style&gt;</span>
            <span class="nt">body</span> <span class="p">{</span>
                <span class="nl">text-align</span><span class="p">:</span><span class="nb">center</span><span class="p">;</span>
                <span class="nl">color</span><span class="p">:</span><span class="m">#FFF</span><span class="p">;</span>
                <span class="nl">background-image</span><span class="p">:</span> <span class="sx">url('img/drankin.jpg')</span><span class="p">;</span>
                <span class="nl">background-size</span><span class="p">:</span> <span class="n">cover</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="nt">&lt;/style&gt;</span>

    <span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>

    <span class="nt">&lt;h1&gt;</span>Alcoholic Material<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>Restricted stuff involving drinking within...<span class="nt">&lt;/p&gt;</span>

    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"../bouncer.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

    <span class="nt">&lt;script&gt;</span>
        <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">//Settings for Bounder.js Plugin</span>
            <span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="dl">"</span><span class="s2">image</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">http://placehold.it/350x150</span><span class="dl">'</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">message</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">As part of our commitment to responsible drinking, we just need to check that you're of legal drinking age.</span><span class="dl">"</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">redirect</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">http://responsibility.org</span><span class="dl">'</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">deny_message</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Sorry, but you are not of legal drinking age.&lt;br&gt;You'll be redirected soon...</span><span class="dl">"</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">deny_timeout</span><span class="dl">"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">link_terms</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">/terms</span><span class="dl">'</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">link_privacy</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">/privacy</span><span class="dl">'</span>
                        <span class="p">};</span>
            <span class="c1">//Initiate Bouncer.js</span>
            <span class="nx">drinkingAge</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h2 id="customization">Customization</h2>

<p>The <a href="https://github.com/d0n601/drinkingAge/blob/master/bouncer.css" target="_blank">bouncer.css</a> file allows you to change just about everything that has to do with the gateway. I’m not a wizard with style sheets and this is a demo…so you’ll want to change things here.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/*
 * Plugin: bouncer.js
 * Description: Style sheet for bouncer js window appearance
 * Author: Ryan Kozak
 * Author's website: https://ryankozak.com
 *
 */</span>


<span class="nc">.spacers</span> <span class="p">{</span>
    <span class="nl">margin</span><span class="p">:</span><span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#age_controls</span> <span class="p">{</span>
    <span class="nl">z-index</span><span class="p">:</span><span class="m">1032</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span><span class="m">#FFF</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span><span class="nb">fixed</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
    <span class="nl">opacity</span><span class="p">:</span><span class="m">1.0</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span><span class="m">#1F1B1C</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span><span class="m">15vh</span> <span class="m">25vw</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span><span class="m">50vw</span><span class="p">;</span>
    <span class="nl">min-width</span><span class="p">:</span><span class="m">320px</span><span class="p">;</span>
    <span class="nl">line-height</span><span class="p">:</span><span class="m">1.5em</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span><span class="m">5px</span><span class="p">;</span>
    <span class="nl">border-style</span><span class="p">:</span> <span class="nb">solid</span><span class="p">;</span>
    <span class="nl">border-width</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span><span class="m">35px</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">select</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span><span class="m">#000</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#age_overlay</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#000</span><span class="p">;</span>
    <span class="nl">opacity</span><span class="p">:</span> <span class="m">.9</span><span class="p">;</span>
    <span class="nl">z-index</span><span class="p">:</span><span class="m">1031</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#deny_entry</span> <span class="p">{</span>
    <span class="nl">z-index</span><span class="p">:</span><span class="m">10000</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span><span class="m">0</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span><span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span><span class="m">100vw</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span><span class="nb">center</span><span class="p">;</span>
    <span class="nl">font-weight</span><span class="p">:</span><span class="m">900</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p> </p>

<p><em>Reference for Legal Drinking Ages</em></p>

<p><a href="http://drinkingage.procon.org/view.resource.php?resourceID=004294" target="_blank">http://drinkingage.procon.org/view.resource.php?resourceID=004294</a></p>

<p> </p>
:ET