<!DOCTYPE html>
<html lang="en-us">

{% include foto-head.html %}

<body class="{{ page.layout }}{% if page.url == '/' %} home{% endif %}">

    {% include sidebar.html %}

    <main class="container">
        <div class="wrap animsition">
          <article>
            <div class="photoCentre" itemscope itemtype="http://schema.org/Photograph">

              <!-- Schema.org BlogPost Invisible Meta-Data -->
              <meta itemprop="author" content="{{ site.owner.name }}"/>
              <meta itemprop="inLanguage" content="en-US"/>
              <meta itemprop="isFamilyFriendly" content="true"/>
              <meta itemprop="url" content="{{ site.url }}{{ page.url }}"/>
              <meta itemprop="name" content="{{page.title}}"/>
              <meta itemprop="image" content="{{ site.url }}/images/photography/{{ page.photo_url }}.jpg"/>
              <meta itemprop="thumbnailUrl" content="{{ site.url }}/images/photography/thumbnails/{{ page.photo_url }}.jpg"/>
              <meta itemprop="description" content="{{page.description}}"/>
              <!-- todo: content location -->

              <div id="photo" style="text-align: center;">
                <img id="picture" style="max-height:100%; max-width:100%;" src="{{ site.url }}/images/photography/{{ page.photo_url }}.jpg" class="entry-feature-image"
                     alt="{{ page.title }}">
              </div>
              <div>

                <a class="animsition-link btn-social photobtn" data-animsition-out="fade-out-left"
                   href="{{ site.url }}/photography/{{page.previous_pic}}" style="float: left;">Newer</a>

                <a class="animsition-link btn-social photobtn" data-animsition-out="fade-out-right"
                   href="{{ site.url }}/photography/{{page.next_pic}}" style="float: right;">Older</a>

              </div>
              <br><br>

              <div class="photoInfoContainer">
                <div class="photoInfo1">
                  <div>
                    <h2 style="margin-bottom: 0px; margin-top: 0px;">{{page.title}}</h2>
                    {% capture photo_date %}
                    {% exiftag date_time_original, %}{{ page.photo_url }}.jpg{% endexiftag %}
                    {% endcapture %}
                    {% capture camera %}
                    {% exiftag model, %}{{ page.photo_url }}.jpg{% endexiftag %}
                    {% endcapture %}
                    {% capture exposure %}
                    {% exiftag exposure_time, %}{{ page.photo_url }}.jpg{% endexiftag %}
                    {% endcapture %}
                    {% capture f_number %}
                    {% exiftag f_number, %}{{ page.photo_url }}.jpg{% endexiftag %}
                    {% endcapture %}
                    {% capture iso %}
                    {% exiftag iso_speed_ratings, %}{{ page.photo_url }}.jpg{% endexiftag %}
                    {% endcapture %}
                    <!-- TODO: insert better text, atm duplicate information .. -->
                    {% if page.description %}
                    {{page.description}}<br>
                    {% else %}
                    Shot on {{photo_date | date_to_long_string }} with {{camera}}<br>
                    <span class="author" itemprop="author">by <span class="fn"><a href="{{ site.url }}/about/"
                                                                                  title="About {{ site.owner.name }}">{{
                      site.author.name }}</a></span></span>
                    {% endif %}
                    <!-- Enable/Disable comments here. To change the disqus thread, go to the Jekyll _config.yml -->
                    <div style="margin-top: 50px;">
                      {% if page.comments == true %}{% include comments.html %}{% endif %}
                    </div>
                  </div>
                </div>
                <div class="photoInfo2">
                  <ul>
                    <li>{% if camera contains 'iPhone' %} <i class="fa fa-mobile"></i> {% else %} <i
                      class="fa fa-camera-retro"></i> {% endif %} {{camera}}
                    </li>
                    <li><b>S</b><i class="fa fa-clock-o"></i> {{exposure}}</li>
                    <li><b>F</b> {{f_number}}</li>
                    <li><b>ISO</b> {{iso}}</li>
                  </ul>
                </div>
              </div>
            </div>
          </article>
        </div>
    </main>

    {% include custom-foot.html %}

    <script src="{{ site.url }}/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="{{ site.url }}/js/plugins/jquery.justifiedGallery.min.js"></script>

    <script>

      var photo = $("#photo");
      var picture = $("#picture");
      photo.click(function (e) {
        var pWidth = $(this).innerWidth();
        var pOffset = $(this).offset();
        var x = e.pageX - pOffset.left;
        if (pWidth / 2 > x) {
          window.location.href = '{{ site.url }}/photography/{{page.previous_pic}}';
        }
        else {
          window.location.href = '{{ site.url }}/photography/{{page.next_pic}}';
        }
      });

      document.onkeydown = function (e) {
        switch (e.keyCode) {
          case 37: //left click
            window.location.href = '{{ site.url }}/photography/{{page.previous_pic}}';
            break;
          case 39: //right click
            window.location.href = '{{ site.url }}/photography/{{page.next_pic}}';
            break;
        }
      };

      function fitImageSize(){
        photo.height("100%");
        var imageMax = $(window).height()/100*70;
        var currentContentHeight = photo.height();
        console.log(imageMax+"  "+currentContentHeight);
        if(currentContentHeight > imageMax){
          photo.height(imageMax);
          photo.width("auto");
          photo.marginLeft = "auto";
          photo.height = picture.height;
        }
      }
      fitImageSize();

      //window.addEventListener('resize', fitImageSize(), true);

      window.onresize = function(event) {
        fitImageSize();
      };

      $(document).ready(function () {
        fitImageSize();
      });

    </script>

  </body>
</html>